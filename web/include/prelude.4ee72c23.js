const e={schedule:{},foreground_color:"#1a2741",background_color:"#c34614",foreground_text_color:"#ffffff",background_text_color:"#ffffff",include_period_name:!0,use_schedule_color:!0};let t=null;async function n(e="/api/v1/today/now/near"){return fetch(`${e}?timestamp=${Math.floor(i().getTime()/1e3)}`).then((e=>e.json().catch((()=>null)))).catch((()=>null))}let r;function o(){return r=Object.assign(e,JSON.parse(localStorage.getItem("schedule")||"{}")),r}function l(e){if(!e)return e;if(Array.isArray(e))return e.map((e=>l(e)));const t=Object.assign({},e),n=t.kind.Class||t.kind.ClassOrLunch,o=r.schedule[n]||r.schedule[t.friendly_name];return o&&(o.name&&(t.friendly_name=r.include_period_name||void 0===r.include_period_name?`${t.friendly_name} - ${o.name}`:o.name),o.url&&(t.url=o.url)),t}function c(e){return r?e.map((e=>l(e))):e}function u(e,t){return`${t}${1===e?"":"s"}`}function i(){const e=new URLSearchParams(window.location.search).get("timestamp");return e?new Date(1e3*Number.parseInt(e,10)):new Date}function s(e,t=i()){const[n,r,o]=e.split(":");return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),n,r,o)}function a(e){return s(e).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}function d(e,t=null,n=!1){const r=t?s(t).getTime():i().getTime(),o=s(e).getTime(),l=Math.floor((o-r)/1e3),c=Math.floor(l/60/60),a=Math.ceil(l/60%60);return n?c>0?`${c}h ${a}m`:`${a}m`:c>0?`${c} ${u(c,"hour")} and ${a} ${u(a,"minute")}`:`${a} ${u(a,"minute")}`}function m(e=document.documentElement){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}function f(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozExitFullScreen?document.mozExitFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}function g(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled}function _(){return null!==(document.fullscreenElement||document.mozFullScreenElement||document.webkitIsFullScreen||document.msFullscreenElement||null)}function h(){const e=r||{},t=!("/"===window.location.pathname&&e.use_schedule_color);document.querySelector("meta[name=theme-color]").setAttribute("content",e.foreground_color||"#1a2741"),t&&e.background_color&&document.querySelector("body").style.setProperty("--background_color",e.background_color||"#c34614"),e.foreground_color&&document.querySelector("body").style.setProperty("--foreground_color",e.foreground_color||"#1a2741"),t&&e.background_text_color&&document.querySelector("body").style.setProperty("--background_text_color",e.background_text_color||"#ffffff"),e.foreground_text_color&&document.querySelector("body").style.setProperty("--foreground_text_color",e.foreground_text_color||"#ffffff")}function p(){o(),"undefined"!=typeof chrome&&void 0!==chrome.runtime&&chrome.runtime.sendMessage("gbkjjbecehodfeijbdmoieepgmfdlgle",{message:"schedule",data:JSON.stringify(r)})}function y(e,t,n=2**31*1e3,r="/"){document.cookie=`${e}=${encodeURIComponent(t)}; ${n?`expires=${new Date(n).toUTCString()}; `:""}path=${r}`}o(),window.addEventListener("load",(()=>{if(!document.querySelector("nav"))return;const e=document.querySelector("#nav-links");document.querySelector("#nav-toggle-button").addEventListener("click",(()=>{e.classList.toggle("show"),e.style.maxHeight=e.classList.contains("show")?e.querySelector("ul").clientHeight+"px":""}))})),window.addEventListener("resize",(()=>{if(!document.querySelector("nav"))return;const e=document.querySelector("#nav-links");e.classList.contains("show")&&(e.style.maxHeight=e.querySelector("ul").clientHeight+"px")})),window.addEventListener("load",(()=>{h()})),p(),Object.assign(window,{black_or_white:function(e,t=1){return e.startsWith("#")||(e=`#${e}`),.2126*Number.parseInt(e.slice(1,3),16)+.7152*Number.parseInt(e.slice(3,5),16)+.0722*Number.parseInt(e.slice(5,7),16)>128?`rgba(0, 0, 0, ${t})`:`rgba(255, 255, 255, ${t})`},bytes_to_color:function(e){return"#"+e.map((e=>("0"+e.toString(16)).slice(-2))).join("")},canFullScreen:g,current_date:i,date_from_api:s,date_string_to_date:function(e){const[t,n,r]=e.split("-");return new Date(Number.parseInt(t,10),Number.parseInt(n,10)-1,Number.parseInt(r,10))},date_to_string:function(e=i(),t=!0){return t?`${e.getUTCFullYear()}-${("0"+(e.getUTCMonth()+1)).slice(-2)}-${("0"+e.getUTCDate()).slice(-2)}`:`${e.getFullYear()}-${("0"+(e.getMonth()+1)).slice(-2)}-${("0"+e.getDate()).slice(-2)}`},enterFullScreen:m,exitFullscreen:f,get:n,getel:function(e){return document.querySelector(`#${e}`)},go:async function e(r){t&&r(t);const o=Date.now(),l=6e4*Math.ceil(o/6e4);setTimeout((()=>e(r)),l-o);let u=await n();u&&(u=c(u),t=u,r(u))},human_list:function(e){let t="";if(1===e.length)return e[0].toString();for(let n=0;n<e.length;n++)n===e.length-1?t+=`${e.length>2?", ":" "}and ${e[n].toString()}`:t+=0===n?e[n].toString():`, ${e[n].toString()}`;return t},human_time:a,human_time_left:d,isFullScreen:_,period_html:function(e){return e?e.url?`<a href=${e.url}>${e.friendly_name.replaceAll("<","&lt;").replaceAll(">","&gt;")}</a>`:e.friendly_name.replaceAll("<","&lt;").replaceAll(">","&gt;"):"None"},plural_suffix:u,process:c,replace_period:l,toggleFullScreen:function(e){g()&&(_()?f():m(e))},put_period_to_element:function(e,t){if(t)return"BeforeSchool"===t.kind?(e.innerHTML="School hasn't started yet!",!1):"AfterSchool"===t.kind?(e.innerHTML="School's out!",!1):(e.innerHTML=e.innerHTML.replaceAll("{START}",a(t.start)).replaceAll("{END}",a(t.end)).replaceAll("{START_IN}",d(t.start,void 0,!0)).replaceAll("{END_IN}",d(t.end,void 0,!0)).replaceAll("{NAME}",t.url?`<a href="${t.url}">${t.friendly_name}</a>`:t.friendly_name),!0);return e.innerHTML="No School",!1},setTheme:h,broadcastConfigToExtension:p,setCookie:y,getCookie:function(e){return document.cookie.split("; ").reduce(((t,n)=>{const r=n.split("=");return r[0]===e?decodeURIComponent(r[1]):t}),"")},deleteCookie:function(e,t){y(e,"",null,t)},config:r,DEFAULT_CONFIG:e}),null!==new URLSearchParams(window.location.search).get("fullscreen")&&(document.querySelector("nav").style.display="none");
//# sourceMappingURL=prelude.4ee72c23.js.map
