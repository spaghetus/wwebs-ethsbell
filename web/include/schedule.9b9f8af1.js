!function(){const e=document.querySelector("#event-wrapper"),t=document.querySelector("#calendar-today #now"),o=47.5,s=1.5;let n,a,i,l,c,r=!0,d="rgb(255, 255, 255)",p="black";function m(t,m=current_date(),u=!1,h=!0){if(r=h,e.innerHTML="",t&&(!c||u)){if(e.style.height="auto",!t.periods[0])return void f();const r=replace_period(t.periods.filter((e=>"Passing"!==e.kind))).filter((e=>e));n=date_from_api(r[0].start,m),a=n.getTime()/1e3,i=date_from_api(r[r.length-1].end,m),l=i.getTime()/1e3,f();let d=(l-a)/60*s;const p={};c=[];for(const[e,t]of r.sort(((e,t)=>date_from_api(e.start,m)-date_from_api(t.start,m))).entries()){const e=date_from_api(t.start,m).getTime()/1e3,n=date_from_api(t.end,m).getTime()/1e3;let i=0;const l=(e-a)/60*s;let r=(n-e)/60*s;const d=l+r;r<o&&(i=o-r,r=o);let f=0;for(;c.filter((e=>e.col===f)).some((e=>l<e.endPos||d<e.startPos));)f++;p[f]=i,c.push({startPos:l,endPos:d,height:r,col:f,period:t})}d+=Math.max(...Object.values(p)),e.style.height=`${d}px`}if(!c)return;const _=new Date(36e5*Math.ceil(n.getTime()/1e3/60/60));for(;_.getTime()<i.getTime();){const t=_.toLocaleTimeString("en-US"),o=`${t.split(":")[0]} ${t.split(" ")[1]}`,n=(_.getTime()/1e3-a)/60*s,i=document.createElement("span");i.classList.add("time"),i.textContent=o,i.style.top=`${n}px`,e.append(i),_.setTime(_.getTime()+36e5)}const g=Math.max(...c.map((e=>e.col)))+1,y=e.clientWidth/g,T=1/g*100;t&&(d=t.color?bytes_to_color(t.color):"#FFFFFF",p=black_or_white(d));for(const t of c){let o=1;for(;t.col+o<g&&!c.filter((e=>e.col===t.col+o)).some((e=>[t.startPos,t.endPos].some((t=>t>=e.startPos&&t<=e.endPos))));)o++;let s=0===t.col?0:-10;y*o<200&&o<g&&(s=200-y*o,s>y&&(s+=y-50));const n=s*t.col,a=document.createElement("div");a.classList.add("event"),a.style.top=t.startPos-3+"px",a.style.height=`${t.height}px`,a.style.left=`calc(${T*t.col}% ${n<0?"+":"-"} ${Math.abs(n)}px)`,a.style.width=`calc(${T*o}% ${s<0?"-":"+"} ${Math.abs(s)}px)`,a.style.zIndex=g-t.col+1,a.setAttribute("tabindex","0"),a.addEventListener("focus",(()=>{for(const e of document.querySelectorAll("#calendar-table .event.selected"))e.classList.remove("selected");a.classList.add("selected")}));const i=document.createElement("div");i.classList.add("event-child"),i.style.backgroundColor=d,i.style.color=p;const l=document.createElement("span");l.classList.add("event-name"),l.innerHTML=period_html(t.period),i.append(l);const r=document.createElement("span");r.classList.add("event-time"),r.innerHTML=`${human_time(t.period.start)} - ${human_time(t.period.end)} (${human_time_left(t.period.end,t.period.start,!0)})`,i.append(r),a.append(i),e.append(a)}}function f(){const e=current_date().getTime()/1e3;t&&r&&a&&l&&e>=a&&e<=l?(t.style.top=(e-a)/60*s+10+"px",t.style.display="block"):t.style.display="none"}window.addEventListener("resize",(()=>m())),setInterval(f,1e3),f(),Object.assign(window,{place_boxes:m})}();
//# sourceMappingURL=schedule.9b9f8af1.js.map
