const e=document.querySelector("#event-wrapper"),t=document.querySelector("#calendar-today #now");let o,s,n,a,l,i=!0,r="rgb(255, 255, 255)",c="black";function d(t,d=current_date(),m=!1,f=!0){if(i=f,e.innerHTML="",t&&(!l||m)){if(e.style.height="auto",!t.periods[0])return void p();const i=replace_period(t.periods.filter((e=>"Passing"!==e.kind))).filter((e=>e));o=date_from_api(i[0].start,d),s=o.getTime()/1e3,n=date_from_api(i[i.length-1].end,d),a=n.getTime()/1e3,p();let r=(a-s)/60*1.5;const c={};l=[];for(const[e,t]of i.sort(((e,t)=>date_from_api(e.start,d)-date_from_api(t.start,d))).entries()){const e=date_from_api(t.start,d).getTime()/1e3,o=date_from_api(t.end,d).getTime()/1e3;let n=0;const a=(e-s)/60*1.5;let i=(o-e)/60*1.5;const r=a+i;i<47.5&&(n=47.5-i,i=47.5);let p=0;for(;l.filter((e=>e.col===p)).some((e=>a<e.endPos||r<e.startPos));)p++;c[p]=n,l.push({startPos:a,endPos:r,height:i,col:p,period:t})}r+=Math.max(...Object.values(c)),e.style.height=`${r}px`}if(!l)return;const u=new Date(36e5*Math.ceil(o.getTime()/1e3/60/60));for(;u.getTime()<n.getTime();){const t=u.toLocaleTimeString("en-US"),o=`${t.split(":")[0]} ${t.split(" ")[1]}`,n=(u.getTime()/1e3-s)/60*1.5,a=document.createElement("span");a.classList.add("time"),a.textContent=o,a.style.top=`${n}px`,e.append(a),u.setTime(u.getTime()+36e5)}const h=Math.max(...l.map((e=>e.col)))+1,_=e.clientWidth/h,g=1/h*100;t&&(r=t.color?bytes_to_color(t.color):"#FFFFFF",c=black_or_white(r));for(const t of l){let o=1;for(;t.col+o<h&&!l.filter((e=>e.col===t.col+o)).some((e=>[t.startPos,t.endPos].some((t=>t>=e.startPos&&t<=e.endPos))));)o++;let s=0===t.col?0:-10;_*o<200&&o<h&&(s=200-_*o,s>_&&(s+=_-50));const n=s*t.col,a=document.createElement("div");a.classList.add("event"),a.style.top=t.startPos-3+"px",a.style.height=`${t.height}px`,a.style.left=`calc(${g*t.col}% ${n<0?"+":"-"} ${Math.abs(n)}px)`,a.style.width=`calc(${g*o}% ${s<0?"-":"+"} ${Math.abs(s)}px)`,a.style.zIndex=h-t.col+1,a.setAttribute("tabindex","0"),a.addEventListener("focus",(()=>{for(const e of document.querySelectorAll("#calendar-table .event.selected"))e.classList.remove("selected");a.classList.add("selected")}));const i=document.createElement("div");i.classList.add("event-child"),i.style.backgroundColor=r,i.style.color=c;const d=document.createElement("span");d.classList.add("event-name"),d.innerHTML=period_html(t.period),i.append(d);const p=document.createElement("span");p.classList.add("event-time"),p.innerHTML=`${human_time(t.period.start)} - ${human_time(t.period.end)} (${human_time_left(t.period.end,t.period.start,!0)})`,i.append(p),a.append(i),e.append(a)}}function p(){const e=current_date().getTime()/1e3;t&&i&&s&&a&&e>=s&&e<=a?(t.style.top=(e-s)/60*1.5+10+"px",t.style.display="block"):t.style.display="none"}window.addEventListener("resize",(()=>d())),setInterval(p,1e3),p(),Object.assign(window,{place_boxes:d});
//# sourceMappingURL=schedule.b7855af2.js.map
