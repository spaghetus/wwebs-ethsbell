!function(){let e=14400,t=0;let n,i,o=!1,l=0;Object.assign(window,{place_boxes:function s(a){let r=replace_period(a.filter((e=>"Passing"!==e.kind)));if(!o){var d,c,m;window.addEventListener("resize",(()=>{s(all_data)})),o=!0;const a=t=>{e=3600*t.target.value,s(all_data)},r=e=>{t=3600*e.target.value,s(all_data)},g=["input"];getel("timeline_length").value=e/3600,getel("timeline_offset").value=0;for(const e of g){var u,f;null===(u=getel("timeline_length"))||void 0===u||u.addEventListener(e,a),null===(f=getel("timeline_offset"))||void 0===f||f.addEventListener(e,r)}const h=()=>{n=!1,t+=l*(navigator.userAgent.includes("Chrom")?-2:2),l=0,s(all_data),getel("timeline_offset").value=Math.round(t/360)/10};null===(d=getel("timeline"))||void 0===d||d.addEventListener("wheel",(e=>{const t=e.shiftKey?e.deltaY:e.deltaX;l+=3*t,n||(setTimeout(h,10),n=!0)})),null===(c=getel("timeline"))||void 0===c||c.addEventListener("touchmove",(e=>{const t=e.touches[0].clientX;i&&(l+=10*(i-t),n||(setTimeout(h,10),n=!0)),i=t})),null===(m=getel("timeline"))||void 0===m||m.addEventListener("touchend",(()=>{i=void 0}))}const g=[];r=r.flat().filter((e=>e)),r.sort(((e,t)=>e.start-t.start));for(const e of r){const t=e.start_timestamp;let n=0,i=0;do{i=0;for(const e of g)e.row===n&&e.end>t&&(i+=1);i>0&&(n+=1)}while(i>0);g.push({row:n,start:e.start_timestamp,end:e.end_timestamp,kind:e.kind,name:e.friendly_name,period:e})}const h=current_date().getTime()/1e3+t,_=getel("timeline>svg").clientWidth;for(const t of g){const n=t.end-t.start;let i=.5+(t.start-h)/e,o=0;i<0&&(o=-i,i=0);const l=_*i;i*=100;let s=n/e;if(s-=o,s<=0||i>100)t.hidden=!0;else{s*=100,s+i>100&&(s=100-i),t.x=i,t.y=10+50*t.row,t.w=s,t.h=40;const e=5;t.tx=l+e,t.ty=t.y+t.h/2+2*e,t.th=30}}for(const e of g){if(e.hidden)continue;let t;if(e.kind.Class)t="🏫";else if(e.kind.ClassOrLunch)t="🏫/🥪";else switch(e.kind){case"Lunch":t="🥪";break;case"Break":t="🛌";break;case"AMSupport":t="🐔";break;case"Passing":t="🏃";break;case"BeforeSchool":t="🌄";break;case"AfterSchool":t="🌇";break;case"Announcements":t="📣";break;default:t=t||"😕"}e.emoji=t,e.color="white"}getel("boxes").innerHTML="";for(const e of g){if(e.hidden)continue;const t=document.createElement("div");t.classList.add("timeline_rect"),t.style.left=`${e.x}%`,t.style.top=`${e.y}px`,t.style.width=`${e.w}%`,t.style.height=`${e.h}px`,t.style["font-size"]=`${e.th}px`,t.innerHTML=`&nbsp;${e.emoji} ${period_html(e.period)}`,getel("boxes").append(t)}const v=new Date(current_date().getTime()+1e3*t);getel("pointer_time").innerHTML=v.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"});const p=new Date(current_date().getTime()+1e3*t-500*e);getel("left_time").innerHTML=p.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"});const w=new Date(current_date().getTime()+1e3*t+500*e);getel("right_time").innerHTML=w.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}})}();
//# sourceMappingURL=timeline.cd3398a9.js.map
