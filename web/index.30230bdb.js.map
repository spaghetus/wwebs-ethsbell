{"mappings":"AAiDAA,OAAOC,gBAjDP,SAAyBC,GACxB,MAAMC,EAAkBC,MAAM,mBAC9B,GAAKD,EAOL,GAHAD,EAAOA,EAAK,GAAGG,QAAOC,IAAM,CAAC,eAAgB,eAAeC,SAASD,EAAEE,QAEvEL,EAAgBM,UAAY,GACR,IAAhBP,EAAKQ,OACRP,EAAgBQ,MAAMC,QAAU,WAC1B,CACNT,EAAgBQ,MAAMC,QAAU,QAChC,IAAK,MAAMC,KAAUX,EAAM,CAC1B,MAAMY,EAAWC,SAASC,cAAc,OACxCF,EAASG,UAAUC,IAAI,gBACvBJ,EAASK,GAAK,gBAAgBN,EAAOO,cAAcC,MAAM,KAAKC,KAAK,OACnE,MAAMZ,GAAUa,cAAcV,EAAOW,KAAOD,cAAcV,EAAOY,QAAU,IAErEC,GADOC,eAAeC,UAAYL,cAAcV,EAAOY,QAAU,IAChDf,EACvBI,EAASH,MAAMkB,YAAY,UAAyB,IAAXH,EAAH,KACtCZ,EAASgB,MAAQ,GAAGjB,EAAOO,yBAC3BjB,EAAgB4B,OAAOjB,E,IA4B1Bd,OAAOgC,yBAhBP,SAAkCnB,EAAQoB,GACzC,MAAMC,EARP,SAAoCrB,GACnC,MAAMH,GAAUa,cAAcV,EAAOW,KAAOD,cAAcV,EAAOY,QAAU,IAG3E,OAFaE,eAAeC,UAAYL,cAAcV,EAAOY,QAAU,IAChDf,C,CAKPyB,CAA2BtB,GAErCuB,EAASH,EAAQI,cAAc,0BAG/BC,EAAyB,EADhBF,EAAOG,EAAEC,QAAQC,MACGC,KAAKC,GAExCP,EAAOzB,MAAMiC,gBAAkB,GAAGN,KAAiBA,IACnDF,EAAOzB,MAAMkC,iBAAmB,GAAGP,IAEnC,MAAMQ,EAASR,EAAgBJ,EAAUI,EACzCF,EAAOzB,MAAMkC,iBAAmBC,C","sources":["frontend/global/progress.js"],"sourcesContent":["function update_progress(data) {\n\tconst progress_parent = getel('progress_parent');\n\tif (!progress_parent) {\n\t\treturn;\n\t}\n\n\tdata = data[1].filter(x => !['BeforeSchool', 'AfterSchool'].includes(x.kind));\n\n\tprogress_parent.innerHTML = '';\n\tif (data.length === 0) {\n\t\tprogress_parent.style.display = 'none';\n\t} else {\n\t\tprogress_parent.style.display = 'block';\n\t\tfor (const period of data) {\n\t\t\tconst progress = document.createElement('div');\n\t\t\tprogress.classList.add('progress_bar');\n\t\t\tprogress.id = `progress_bar_${period.friendly_name.split(' ').join('_')}`;\n\t\t\tconst length = (date_from_api(period.end) - date_from_api(period.start)) / 1000;\n\t\t\tconst now = (current_date().getTime() - date_from_api(period.start)) / 1000;\n\t\t\tconst position = now / length;\n\t\t\tprogress.style.setProperty('--width', `${position * 100}%`);\n\t\t\tprogress.title = `${period.friendly_name} progress`;\n\t\t\tprogress_parent.append(progress);\n\t\t}\n\t}\n}\n\nfunction calculate_progress_percent(period) {\n\tconst length = (date_from_api(period.end) - date_from_api(period.start)) / 1000;\n\tconst now = (current_date().getTime() - date_from_api(period.start)) / 1000;\n\tconst position = now / length;\n\treturn position;\n}\n\nfunction update_progress_circular(period, element) {\n\tconst percent = calculate_progress_percent(period);\n\n\tconst circle = element.querySelector('.progress-ring__circle');\n\n\tconst radius = circle.r.baseVal.value;\n\tconst circumference = radius * 2 * Math.PI;\n\n\tcircle.style.strokeDasharray = `${circumference} ${circumference}`;\n\tcircle.style.strokeDashoffset = `${circumference}`;\n\n\tconst offset = circumference - percent * circumference;\n\tcircle.style.strokeDashoffset = offset;\n}\n\nwindow.update_progress = update_progress;\nwindow.update_progress_circular = update_progress_circular;\n"],"names":["window","update_progress","data","progress_parent","getel","filter","x","includes","kind","innerHTML","length","style","display","period","progress","document","createElement","classList","add","id","friendly_name","split","join","date_from_api","end","start","position","current_date","getTime","setProperty","title","append","update_progress_circular","element","percent","$ecc1980bb47b8b11$var$calculate_progress_percent","circle","querySelector","circumference","r","baseVal","value","Math","PI","strokeDasharray","strokeDashoffset","offset"],"version":3,"file":"index.30230bdb.js.map"}